!function (t, e) { "object" == typeof exports && "undefined" != typeof module ? module.exports = e() : "function" == typeof define && define.amd ? define(e) : (t = "undefined" != typeof globalThis ? globalThis : t || self).GhostContentAPI = e() }(this, (function () { "use strict"; var t = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {}; function e(t, e) { return t(e = { exports: {} }, e.exports), e.exports } var n = function (t) { return t && t.Math == Math && t }, r = n("object" == typeof globalThis && globalThis) || n("object" == typeof window && window) || n("object" == typeof self && self) || n("object" == typeof t && t) || Function("return this")(), o = function (t) { try { return !!t() } catch (t) { return !0 } }, i = !o((function () { return 7 != Object.defineProperty({}, 1, { get: function () { return 7 } })[1] })), a = {}.propertyIsEnumerable, c = Object.getOwnPropertyDescriptor, u = { f: c && !a.call({ 1: 2 }, 1) ? function (t) { var e = c(this, t); return !!e && e.enumerable } : a }, s = function (t, e) { return { enumerable: !(1 & t), configurable: !(2 & t), writable: !(4 & t), value: e } }, f = {}.toString, l = function (t) { return f.call(t).slice(8, -1) }, p = "".split, d = o((function () { return !Object("z").propertyIsEnumerable(0) })) ? function (t) { return "String" == l(t) ? p.call(t, "") : Object(t) } : Object, h = function (t) { if (null == t) throw TypeError("Can't call method on " + t); return t }, v = function (t) { return d(h(t)) }, g = function (t) { return "object" == typeof t ? null !== t : "function" == typeof t }, m = function (t, e) { if (!g(t)) return t; var n, r; if (e && "function" == typeof (n = t.toString) && !g(r = n.call(t))) return r; if ("function" == typeof (n = t.valueOf) && !g(r = n.call(t))) return r; if (!e && "function" == typeof (n = t.toString) && !g(r = n.call(t))) return r; throw TypeError("Can't convert object to primitive value") }, y = {}.hasOwnProperty, b = function (t, e) { return y.call(t, e) }, w = r.document, S = g(w) && g(w.createElement), j = function (t) { return S ? w.createElement(t) : {} }, E = !i && !o((function () { return 7 != Object.defineProperty(j("div"), "a", { get: function () { return 7 } }).a })), O = Object.getOwnPropertyDescriptor, T = { f: i ? O : function (t, e) { if (t = v(t), e = m(e, !0), E) try { return O(t, e) } catch (t) { } if (b(t, e)) return s(!u.f.call(t, e), t[e]) } }, x = function (t) { if (!g(t)) throw TypeError(String(t) + " is not an object"); return t }, C = Object.defineProperty, A = { f: i ? C : function (t, e, n) { if (x(t), e = m(e, !0), x(n), E) try { return C(t, e, n) } catch (t) { } if ("get" in n || "set" in n) throw TypeError("Accessors not supported"); return "value" in n && (t[e] = n.value), t } }, P = i ? function (t, e, n) { return A.f(t, e, s(1, n)) } : function (t, e, n) { return t[e] = n, t }, L = function (t, e) { try { P(r, t, e) } catch (n) { r[t] = e } return e }, R = r["__core-js_shared__"] || L("__core-js_shared__", {}), k = Function.toString; "function" != typeof R.inspectSource && (R.inspectSource = function (t) { return k.call(t) }); var M, N, q, U = R.inspectSource, B = r.WeakMap, D = "function" == typeof B && /native code/.test(U(B)), I = e((function (t) { (t.exports = function (t, e) { return R[t] || (R[t] = void 0 !== e ? e : {}) })("versions", []).push({ version: "3.6.5", mode: "global", copyright: "Â© 2020 Denis Pushkarev (zloirock.ru)" }) })), F = 0, _ = Math.random(), W = function (t) { return "Symbol(" + String(void 0 === t ? "" : t) + ")_" + (++F + _).toString(36) }, z = I("keys"), H = function (t) { return z[t] || (z[t] = W(t)) }, V = {}, G = r.WeakMap; if (D) { var X = new G, J = X.get, K = X.has, $ = X.set; M = function (t, e) { return $.call(X, t, e), e }, N = function (t) { return J.call(X, t) || {} }, q = function (t) { return K.call(X, t) } } else { var Y = H("state"); V[Y] = !0, M = function (t, e) { return P(t, Y, e), e }, N = function (t) { return b(t, Y) ? t[Y] : {} }, q = function (t) { return b(t, Y) } } var Q, Z, tt = { set: M, get: N, has: q, enforce: function (t) { return q(t) ? N(t) : M(t, {}) }, getterFor: function (t) { return function (e) { var n; if (!g(e) || (n = N(e)).type !== t) throw TypeError("Incompatible receiver, " + t + " required"); return n } } }, et = e((function (t) { var e = tt.get, n = tt.enforce, o = String(String).split("String"); (t.exports = function (t, e, i, a) { var c = !!a && !!a.unsafe, u = !!a && !!a.enumerable, s = !!a && !!a.noTargetGet; "function" == typeof i && ("string" != typeof e || b(i, "name") || P(i, "name", e), n(i).source = o.join("string" == typeof e ? e : "")), t !== r ? (c ? !s && t[e] && (u = !0) : delete t[e], u ? t[e] = i : P(t, e, i)) : u ? t[e] = i : L(e, i) })(Function.prototype, "toString", (function () { return "function" == typeof this && e(this).source || U(this) })) })), nt = r, rt = function (t) { return "function" == typeof t ? t : void 0 }, ot = function (t, e) { return arguments.length < 2 ? rt(nt[t]) || rt(r[t]) : nt[t] && nt[t][e] || r[t] && r[t][e] }, it = Math.ceil, at = Math.floor, ct = function (t) { return isNaN(t = +t) ? 0 : (t > 0 ? at : it)(t) }, ut = Math.min, st = function (t) { return t > 0 ? ut(ct(t), 9007199254740991) : 0 }, ft = Math.max, lt = Math.min, pt = function (t) { return function (e, n, r) { var o, i = v(e), a = st(i.length), c = function (t, e) { var n = ct(t); return n < 0 ? ft(n + e, 0) : lt(n, e) }(r, a); if (t && n != n) { for (; a > c;)if ((o = i[c++]) != o) return !0 } else for (; a > c; c++)if ((t || c in i) && i[c] === n) return t || c || 0; return !t && -1 } }, dt = { includes: pt(!0), indexOf: pt(!1) }, ht = dt.indexOf, vt = function (t, e) { var n, r = v(t), o = 0, i = []; for (n in r) !b(V, n) && b(r, n) && i.push(n); for (; e.length > o;)b(r, n = e[o++]) && (~ht(i, n) || i.push(n)); return i }, gt = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"], mt = gt.concat("length", "prototype"), yt = { f: Object.getOwnPropertyNames || function (t) { return vt(t, mt) } }, bt = { f: Object.getOwnPropertySymbols }, wt = ot("Reflect", "ownKeys") || function (t) { var e = yt.f(x(t)), n = bt.f; return n ? e.concat(n(t)) : e }, St = function (t, e) { for (var n = wt(e), r = A.f, o = T.f, i = 0; i < n.length; i++) { var a = n[i]; b(t, a) || r(t, a, o(e, a)) } }, jt = /#|\.prototype\./, Et = function (t, e) { var n = Tt[Ot(t)]; return n == Ct || n != xt && ("function" == typeof e ? o(e) : !!e) }, Ot = Et.normalize = function (t) { return String(t).replace(jt, ".").toLowerCase() }, Tt = Et.data = {}, xt = Et.NATIVE = "N", Ct = Et.POLYFILL = "P", At = Et, Pt = T.f, Lt = function (t, e) { var n, o, i, a, c, u = t.target, s = t.global, f = t.stat; if (n = s ? r : f ? r[u] || L(u, {}) : (r[u] || {}).prototype) for (o in e) { if (a = e[o], i = t.noTargetGet ? (c = Pt(n, o)) && c.value : n[o], !At(s ? o : u + (f ? "." : "#") + o, t.forced) && void 0 !== i) { if (typeof a == typeof i) continue; St(a, i) } (t.sham || i && i.sham) && P(a, "sham", !0), et(n, o, a, t) } }, Rt = Array.isArray || function (t) { return "Array" == l(t) }, kt = function (t) { return Object(h(t)) }, Mt = function (t, e, n) { var r = m(e); r in t ? A.f(t, r, s(0, n)) : t[r] = n }, Nt = !!Object.getOwnPropertySymbols && !o((function () { return !String(Symbol()) })), qt = Nt && !Symbol.sham && "symbol" == typeof Symbol.iterator, Ut = I("wks"), Bt = r.Symbol, Dt = qt ? Bt : Bt && Bt.withoutSetter || W, It = function (t) { return b(Ut, t) || (Nt && b(Bt, t) ? Ut[t] = Bt[t] : Ut[t] = Dt("Symbol." + t)), Ut[t] }, Ft = It("species"), _t = function (t, e) { var n; return Rt(t) && ("function" != typeof (n = t.constructor) || n !== Array && !Rt(n.prototype) ? g(n) && null === (n = n[Ft]) && (n = void 0) : n = void 0), new (void 0 === n ? Array : n)(0 === e ? 0 : e) }, Wt = ot("navigator", "userAgent") || "", zt = r.process, Ht = zt && zt.versions, Vt = Ht && Ht.v8; Vt ? Z = (Q = Vt.split("."))[0] + Q[1] : Wt && (!(Q = Wt.match(/Edge\/(\d+)/)) || Q[1] >= 74) && (Q = Wt.match(/Chrome\/(\d+)/)) && (Z = Q[1]); var Gt, Xt = Z && +Z, Jt = It("species"), Kt = It("isConcatSpreadable"), $t = Xt >= 51 || !o((function () { var t = []; return t[Kt] = !1, t.concat()[0] !== t })), Yt = (Gt = "concat", Xt >= 51 || !o((function () { var t = []; return (t.constructor = {})[Jt] = function () { return { foo: 1 } }, 1 !== t[Gt](Boolean).foo }))), Qt = function (t) { if (!g(t)) return !1; var e = t[Kt]; return void 0 !== e ? !!e : Rt(t) }; Lt({ target: "Array", proto: !0, forced: !$t || !Yt }, { concat: function (t) { var e, n, r, o, i, a = kt(this), c = _t(a, 0), u = 0; for (e = -1, r = arguments.length; e < r; e++)if (Qt(i = -1 === e ? a : arguments[e])) { if (u + (o = st(i.length)) > 9007199254740991) throw TypeError("Maximum allowed index exceeded"); for (n = 0; n < o; n++, u++)n in i && Mt(c, u, i[n]) } else { if (u >= 9007199254740991) throw TypeError("Maximum allowed index exceeded"); Mt(c, u++, i) } return c.length = u, c } }); var Zt = function (t) { if ("function" != typeof t) throw TypeError(String(t) + " is not a function"); return t }, te = function (t, e, n) { if (Zt(t), void 0 === e) return t; switch (n) { case 0: return function () { return t.call(e) }; case 1: return function (n) { return t.call(e, n) }; case 2: return function (n, r) { return t.call(e, n, r) }; case 3: return function (n, r, o) { return t.call(e, n, r, o) } }return function () { return t.apply(e, arguments) } }, ee = [].push, ne = function (t) { var e = 1 == t, n = 2 == t, r = 3 == t, o = 4 == t, i = 6 == t, a = 5 == t || i; return function (c, u, s, f) { for (var l, p, h = kt(c), v = d(h), g = te(u, s, 3), m = st(v.length), y = 0, b = f || _t, w = e ? b(c, m) : n ? b(c, 0) : void 0; m > y; y++)if ((a || y in v) && (p = g(l = v[y], y, h), t)) if (e) w[y] = p; else if (p) switch (t) { case 3: return !0; case 5: return l; case 6: return y; case 2: ee.call(w, l) } else if (o) return !1; return i ? -1 : r || o ? o : w } }, re = { forEach: ne(0), map: ne(1), filter: ne(2), some: ne(3), every: ne(4), find: ne(5), findIndex: ne(6) }, oe = function (t, e) { var n = [][t]; return !!n && o((function () { n.call(null, e || function () { throw 1 }, 1) })) }, ie = Object.defineProperty, ae = {}, ce = function (t) { throw t }, ue = function (t, e) { if (b(ae, t)) return ae[t]; e || (e = {}); var n = [][t], r = !!b(e, "ACCESSORS") && e.ACCESSORS, a = b(e, 0) ? e[0] : ce, c = b(e, 1) ? e[1] : void 0; return ae[t] = !!n && !o((function () { if (r && !i) return !0; var t = { length: -1 }; r ? ie(t, 1, { enumerable: !0, get: ce }) : t[1] = 1, n.call(t, a, c) })) }, se = re.forEach, fe = oe("forEach"), le = ue("forEach"), pe = fe && le ? [].forEach : function (t) { return se(this, t, arguments.length > 1 ? arguments[1] : void 0) }; Lt({ target: "Array", proto: !0, forced: [].forEach != pe }, { forEach: pe }); var de, he = Object.keys || function (t) { return vt(t, gt) }, ve = i ? Object.defineProperties : function (t, e) { x(t); for (var n, r = he(e), o = r.length, i = 0; o > i;)A.f(t, n = r[i++], e[n]); return t }, ge = ot("document", "documentElement"), me = H("IE_PROTO"), ye = function () { }, be = function (t) { return "<script>" + t + "<\/script>" }, we = function () { try { de = document.domain && new ActiveXObject("htmlfile") } catch (t) { } var t, e; we = de ? function (t) { t.write(be("")), t.close(); var e = t.parentWindow.Object; return t = null, e }(de) : ((e = j("iframe")).style.display = "none", ge.appendChild(e), e.src = String("javascript:"), (t = e.contentWindow.document).open(), t.write(be("document.F=Object")), t.close(), t.F); for (var n = gt.length; n--;)delete we.prototype[gt[n]]; return we() }; V[me] = !0; var Se = Object.create || function (t, e) { var n; return null !== t ? (ye.prototype = x(t), n = new ye, ye.prototype = null, n[me] = t) : n = we(), void 0 === e ? n : ve(n, e) }, je = It("unscopables"), Ee = Array.prototype; null == Ee[je] && A.f(Ee, je, { configurable: !0, value: Se(null) }); var Oe, Te = dt.includes; Lt({ target: "Array", proto: !0, forced: !ue("indexOf", { ACCESSORS: !0, 1: 0 }) }, { includes: function (t) { return Te(this, t, arguments.length > 1 ? arguments[1] : void 0) } }), Oe = "includes", Ee[je][Oe] = !0; var xe = [].join, Ce = d != Object, Ae = oe("join", ","); Lt({ target: "Array", proto: !0, forced: Ce || !Ae }, { join: function (t) { return xe.call(v(this), void 0 === t ? "," : t) } }); var Pe = function (t) { return function (e, n, r, o) { Zt(n); var i = kt(e), a = d(i), c = st(i.length), u = t ? c - 1 : 0, s = t ? -1 : 1; if (r < 2) for (; ;) { if (u in a) { o = a[u], u += s; break } if (u += s, t ? u < 0 : c <= u) throw TypeError("Reduce of empty array with no initial value") } for (; t ? u >= 0 : c > u; u += s)u in a && (o = n(o, a[u], u, i)); return o } }, Le = { left: Pe(!1), right: Pe(!0) }.left, Re = oe("reduce"), ke = ue("reduce", { 1: 0 }); Lt({ target: "Array", proto: !0, forced: !Re || !ke }, { reduce: function (t) { return Le(this, t, arguments.length, arguments.length > 1 ? arguments[1] : void 0) } }); var Me = A.f, Ne = Function.prototype, qe = Ne.toString, Ue = /^\s*function ([^ (]*)/; i && !("name" in Ne) && Me(Ne, "name", { configurable: !0, get: function () { try { return qe.call(this).match(Ue)[1] } catch (t) { return "" } } }); var Be = Object.assign, De = Object.defineProperty, Ie = !Be || o((function () { if (i && 1 !== Be({ b: 1 }, Be(De({}, "a", { enumerable: !0, get: function () { De(this, "b", { value: 3, enumerable: !1 }) } }), { b: 2 })).b) return !0; var t = {}, e = {}, n = Symbol(); return t[n] = 7, "abcdefghijklmnopqrst".split("").forEach((function (t) { e[t] = t })), 7 != Be({}, t)[n] || "abcdefghijklmnopqrst" != he(Be({}, e)).join("") })) ? function (t, e) { for (var n = kt(t), r = arguments.length, o = 1, a = bt.f, c = u.f; r > o;)for (var s, f = d(arguments[o++]), l = a ? he(f).concat(a(f)) : he(f), p = l.length, h = 0; p > h;)s = l[h++], i && !c.call(f, s) || (n[s] = f[s]); return n } : Be; Lt({ target: "Object", stat: !0, forced: Object.assign !== Ie }, { assign: Ie }), Lt({ target: "Object", stat: !0, forced: o((function () { he(1) })) }, { keys: function (t) { return he(kt(t)) } }); var Fe = {}; Fe[It("toStringTag")] = "z"; var _e = "[object z]" === String(Fe), We = It("toStringTag"), ze = "Arguments" == l(function () { return arguments }()), He = _e ? l : function (t) { var e, n, r; return void 0 === t ? "Undefined" : null === t ? "Null" : "string" == typeof (n = function (t, e) { try { return t[e] } catch (t) { } }(e = Object(t), We)) ? n : ze ? l(e) : "Object" == (r = l(e)) && "function" == typeof e.callee ? "Arguments" : r }, Ve = _e ? {}.toString : function () { return "[object " + He(this) + "]" }; _e || et(Object.prototype, "toString", Ve, { unsafe: !0 }); var Ge = r.Promise, Xe = A.f, Je = It("toStringTag"), Ke = It("species"), $e = {}, Ye = It("iterator"), Qe = Array.prototype, Ze = It("iterator"), tn = function (t, e, n, r) { try { return r ? e(x(n)[0], n[1]) : e(n) } catch (e) { var o = t.return; throw void 0 !== o && x(o.call(t)), e } }, en = e((function (t) { var e = function (t, e) { this.stopped = t, this.result = e }; (t.exports = function (t, n, r, o, i) { var a, c, u, s, f, l, p, d, h = te(n, r, o ? 2 : 1); if (i) a = t; else { if ("function" != typeof (c = function (t) { if (null != t) return t[Ze] || t["@@iterator"] || $e[He(t)] }(t))) throw TypeError("Target is not iterable"); if (void 0 !== (d = c) && ($e.Array === d || Qe[Ye] === d)) { for (u = 0, s = st(t.length); s > u; u++)if ((f = o ? h(x(p = t[u])[0], p[1]) : h(t[u])) && f instanceof e) return f; return new e(!1) } a = c.call(t) } for (l = a.next; !(p = l.call(a)).done;)if ("object" == typeof (f = tn(a, h, p.value, o)) && f && f instanceof e) return f; return new e(!1) }).stop = function (t) { return new e(!0, t) } })), nn = It("iterator"), rn = !1; try { var on = 0, an = { next: function () { return { done: !!on++ } }, return: function () { rn = !0 } }; an[nn] = function () { return this }, Array.from(an, (function () { throw 2 })) } catch (t) { } var cn, un, sn, fn = It("species"), ln = /(iphone|ipod|ipad).*applewebkit/i.test(Wt), pn = r.location, dn = r.setImmediate, hn = r.clearImmediate, vn = r.process, gn = r.MessageChannel, mn = r.Dispatch, yn = 0, bn = {}, wn = function (t) { if (bn.hasOwnProperty(t)) { var e = bn[t]; delete bn[t], e() } }, Sn = function (t) { return function () { wn(t) } }, jn = function (t) { wn(t.data) }, En = function (t) { r.postMessage(t + "", pn.protocol + "//" + pn.host) }; dn && hn || (dn = function (t) { for (var e = [], n = 1; arguments.length > n;)e.push(arguments[n++]); return bn[++yn] = function () { ("function" == typeof t ? t : Function(t)).apply(void 0, e) }, cn(yn), yn }, hn = function (t) { delete bn[t] }, "process" == l(vn) ? cn = function (t) { vn.nextTick(Sn(t)) } : mn && mn.now ? cn = function (t) { mn.now(Sn(t)) } : gn && !ln ? (sn = (un = new gn).port2, un.port1.onmessage = jn, cn = te(sn.postMessage, sn, 1)) : !r.addEventListener || "function" != typeof postMessage || r.importScripts || o(En) || "file:" === pn.protocol ? cn = "onreadystatechange" in j("script") ? function (t) { ge.appendChild(j("script")).onreadystatechange = function () { ge.removeChild(this), wn(t) } } : function (t) { setTimeout(Sn(t), 0) } : (cn = En, r.addEventListener("message", jn, !1))); var On, Tn, xn, Cn, An, Pn, Ln, Rn, kn = { set: dn, clear: hn }, Mn = T.f, Nn = kn.set, qn = r.MutationObserver || r.WebKitMutationObserver, Un = r.process, Bn = r.Promise, Dn = "process" == l(Un), In = Mn(r, "queueMicrotask"), Fn = In && In.value; Fn || (On = function () { var t, e; for (Dn && (t = Un.domain) && t.exit(); Tn;) { e = Tn.fn, Tn = Tn.next; try { e() } catch (t) { throw Tn ? Cn() : xn = void 0, t } } xn = void 0, t && t.enter() }, Dn ? Cn = function () { Un.nextTick(On) } : qn && !ln ? (An = !0, Pn = document.createTextNode(""), new qn(On).observe(Pn, { characterData: !0 }), Cn = function () { Pn.data = An = !An }) : Bn && Bn.resolve ? (Ln = Bn.resolve(void 0), Rn = Ln.then, Cn = function () { Rn.call(Ln, On) }) : Cn = function () { Nn.call(r, On) }); var _n, Wn, zn, Hn, Vn, Gn, Xn, Jn = Fn || function (t) { var e = { fn: t, next: void 0 }; xn && (xn.next = e), Tn || (Tn = e, Cn()), xn = e }, Kn = function (t) { var e, n; this.promise = new t((function (t, r) { if (void 0 !== e || void 0 !== n) throw TypeError("Bad Promise constructor"); e = t, n = r })), this.resolve = Zt(e), this.reject = Zt(n) }, $n = { f: function (t) { return new Kn(t) } }, Yn = function (t, e) { if (x(t), g(e) && e.constructor === t) return e; var n = $n.f(t); return (0, n.resolve)(e), n.promise }, Qn = function (t) { try { return { error: !1, value: t() } } catch (t) { return { error: !0, value: t } } }, Zn = kn.set, tr = It("species"), er = "Promise", nr = tt.get, rr = tt.set, or = tt.getterFor(er), ir = Ge, ar = r.TypeError, cr = r.document, ur = r.process, sr = ot("fetch"), fr = $n.f, lr = fr, pr = "process" == l(ur), dr = !!(cr && cr.createEvent && r.dispatchEvent), hr = At(er, (function () { if (!(U(ir) !== String(ir))) { if (66 === Xt) return !0; if (!pr && "function" != typeof PromiseRejectionEvent) return !0 } if (Xt >= 51 && /native code/.test(ir)) return !1; var t = ir.resolve(1), e = function (t) { t((function () { }), (function () { })) }; return (t.constructor = {})[tr] = e, !(t.then((function () { })) instanceof e) })), vr = hr || !function (t, e) { if (!e && !rn) return !1; var n = !1; try { var r = {}; r[nn] = function () { return { next: function () { return { done: n = !0 } } } }, t(r) } catch (t) { } return n }((function (t) { ir.all(t).catch((function () { })) })), gr = function (t) { var e; return !(!g(t) || "function" != typeof (e = t.then)) && e }, mr = function (t, e, n) { if (!e.notified) { e.notified = !0; var r = e.reactions; Jn((function () { for (var o = e.value, i = 1 == e.state, a = 0; r.length > a;) { var c, u, s, f = r[a++], l = i ? f.ok : f.fail, p = f.resolve, d = f.reject, h = f.domain; try { l ? (i || (2 === e.rejection && Sr(t, e), e.rejection = 1), !0 === l ? c = o : (h && h.enter(), c = l(o), h && (h.exit(), s = !0)), c === f.promise ? d(ar("Promise-chain cycle")) : (u = gr(c)) ? u.call(c, p, d) : p(c)) : d(o) } catch (t) { h && !s && h.exit(), d(t) } } e.reactions = [], e.notified = !1, n && !e.rejection && br(t, e) })) } }, yr = function (t, e, n) { var o, i; dr ? ((o = cr.createEvent("Event")).promise = e, o.reason = n, o.initEvent(t, !1, !0), r.dispatchEvent(o)) : o = { promise: e, reason: n }, (i = r["on" + t]) ? i(o) : "unhandledrejection" === t && function (t, e) { var n = r.console; n && n.error && (1 === arguments.length ? n.error(t) : n.error(t, e)) }("Unhandled promise rejection", n) }, br = function (t, e) { Zn.call(r, (function () { var n, r = e.value; if (wr(e) && (n = Qn((function () { pr ? ur.emit("unhandledRejection", r, t) : yr("unhandledrejection", t, r) })), e.rejection = pr || wr(e) ? 2 : 1, n.error)) throw n.value })) }, wr = function (t) { return 1 !== t.rejection && !t.parent }, Sr = function (t, e) { Zn.call(r, (function () { pr ? ur.emit("rejectionHandled", t) : yr("rejectionhandled", t, e.value) })) }, jr = function (t, e, n, r) { return function (o) { t(e, n, o, r) } }, Er = function (t, e, n, r) { e.done || (e.done = !0, r && (e = r), e.value = n, e.state = 2, mr(t, e, !0)) }, Or = function (t, e, n, r) { if (!e.done) { e.done = !0, r && (e = r); try { if (t === n) throw ar("Promise can't be resolved itself"); var o = gr(n); o ? Jn((function () { var r = { done: !1 }; try { o.call(n, jr(Or, t, r, e), jr(Er, t, r, e)) } catch (n) { Er(t, r, n, e) } })) : (e.value = n, e.state = 1, mr(t, e, !1)) } catch (n) { Er(t, { done: !1 }, n, e) } } }; hr && (ir = function (t) { !function (t, e, n) { if (!(t instanceof e)) throw TypeError("Incorrect " + (n ? n + " " : "") + "invocation") }(this, ir, er), Zt(t), _n.call(this); var e = nr(this); try { t(jr(Or, this, e), jr(Er, this, e)) } catch (t) { Er(this, e, t) } }, (_n = function (t) { rr(this, { type: er, done: !1, notified: !1, parent: !1, reactions: [], rejection: !1, state: 0, value: void 0 }) }).prototype = function (t, e, n) { for (var r in e) et(t, r, e[r], n); return t }(ir.prototype, { then: function (t, e) { var n, r, o, i = or(this), a = fr((n = ir, void 0 === (o = x(this).constructor) || null == (r = x(o)[fn]) ? n : Zt(r))); return a.ok = "function" != typeof t || t, a.fail = "function" == typeof e && e, a.domain = pr ? ur.domain : void 0, i.parent = !0, i.reactions.push(a), 0 != i.state && mr(this, i, !1), a.promise }, catch: function (t) { return this.then(void 0, t) } }), Wn = function () { var t = new _n, e = nr(t); this.promise = t, this.resolve = jr(Or, t, e), this.reject = jr(Er, t, e) }, $n.f = fr = function (t) { return t === ir || t === zn ? new Wn(t) : lr(t) }, "function" == typeof Ge && (Hn = Ge.prototype.then, et(Ge.prototype, "then", (function (t, e) { var n = this; return new ir((function (t, e) { Hn.call(n, t, e) })).then(t, e) }), { unsafe: !0 }), "function" == typeof sr && Lt({ global: !0, enumerable: !0, forced: !0 }, { fetch: function (t) { return Yn(ir, sr.apply(r, arguments)) } }))), Lt({ global: !0, wrap: !0, forced: hr }, { Promise: ir }), Gn = er, Xn = !1, (Vn = ir) && !b(Vn = Xn ? Vn : Vn.prototype, Je) && Xe(Vn, Je, { configurable: !0, value: Gn }), function (t) { var e = ot(t), n = A.f; i && e && !e[Ke] && n(e, Ke, { configurable: !0, get: function () { return this } }) }(er), zn = ot(er), Lt({ target: er, stat: !0, forced: hr }, { reject: function (t) { var e = fr(this); return e.reject.call(void 0, t), e.promise } }), Lt({ target: er, stat: !0, forced: hr }, { resolve: function (t) { return Yn(this, t) } }), Lt({ target: er, stat: !0, forced: vr }, { all: function (t) { var e = this, n = fr(e), r = n.resolve, o = n.reject, i = Qn((function () { var n = Zt(e.resolve), i = [], a = 0, c = 1; en(t, (function (t) { var u = a++, s = !1; i.push(void 0), c++, n.call(e, t).then((function (t) { s || (s = !0, i[u] = t, --c || r(i)) }), o) })), --c || r(i) })); return i.error && o(i.value), n.promise }, race: function (t) { var e = this, n = fr(e), r = n.reject, o = Qn((function () { var o = Zt(e.resolve); en(t, (function (t) { o.call(e, t).then(n.resolve, r) })) })); return o.error && r(o.value), n.promise } }); var Tr, xr = It("match"), Cr = function (t) { if (function (t) { var e; return g(t) && (void 0 !== (e = t[xr]) ? !!e : "RegExp" == l(t)) }(t)) throw TypeError("The method doesn't accept regular expressions"); return t }, Ar = It("match"), Pr = function (t) { var e = /./; try { "/./"[t](e) } catch (n) { try { return e[Ar] = !1, "/./"[t](e) } catch (t) { } } return !1 }, Lr = T.f, Rr = "".endsWith, kr = Math.min, Mr = Pr("endsWith"); Lt({ target: "String", proto: !0, forced: !!(Mr || (Tr = Lr(String.prototype, "endsWith"), !Tr || Tr.writable)) && !Mr }, { endsWith: function (t) { var e = String(h(this)); Cr(t); var n = arguments.length > 1 ? arguments[1] : void 0, r = st(e.length), o = void 0 === n ? r : kr(st(n), r), i = String(t); return Rr ? Rr.call(e, i, o) : e.slice(o - i.length, o) === i } }); var Nr = T.f, qr = "".startsWith, Ur = Math.min, Br = Pr("startsWith"); Lt({ target: "String", proto: !0, forced: !(!Br && !!function () { var t = Nr(String.prototype, "startsWith"); return t && !t.writable }()) && !Br }, { startsWith: function (t) { var e = String(h(this)); Cr(t); var n = st(Ur(arguments.length > 1 ? arguments[1] : void 0, e.length)), r = String(t); return qr ? qr.call(e, r, n) : e.slice(n, n + r.length) === r } }); for (var Dr in { CSSRuleList: 0, CSSStyleDeclaration: 0, CSSValueList: 0, ClientRectList: 0, DOMRectList: 0, DOMStringList: 0, DOMTokenList: 1, DataTransferItemList: 0, FileList: 0, HTMLAllCollection: 0, HTMLCollection: 0, HTMLFormElement: 0, HTMLSelectElement: 0, MediaList: 0, MimeTypeArray: 0, NamedNodeMap: 0, NodeList: 1, PaintRequestList: 0, Plugin: 0, PluginArray: 0, SVGLengthList: 0, SVGNumberList: 0, SVGPathSegList: 0, SVGPointList: 0, SVGStringList: 0, SVGTransformList: 0, SourceBufferList: 0, StyleSheetList: 0, TextTrackCueList: 0, TextTrackList: 0, TouchList: 0 }) { var Ir = r[Dr], Fr = Ir && Ir.prototype; if (Fr && Fr.forEach !== pe) try { P(Fr, "forEach", pe) } catch (t) { Fr.forEach = pe } } var _r = function (t, e) { return function () { for (var n = new Array(arguments.length), r = 0; r < n.length; r++)n[r] = arguments[r]; return t.apply(e, n) } }, Wr = Object.prototype.toString; function zr(t) { return "[object Array]" === Wr.call(t) } function Hr(t) { return void 0 === t } function Vr(t) { return null !== t && "object" == typeof t } function Gr(t) { if ("[object Object]" !== Wr.call(t)) return !1; var e = Object.getPrototypeOf(t); return null === e || e === Object.prototype } function Xr(t) { return "[object Function]" === Wr.call(t) } function Jr(t, e) { if (null != t) if ("object" != typeof t && (t = [t]), zr(t)) for (var n = 0, r = t.length; n < r; n++)e.call(null, t[n], n, t); else for (var o in t) Object.prototype.hasOwnProperty.call(t, o) && e.call(null, t[o], o, t) } var Kr = { isArray: zr, isArrayBuffer: function (t) { return "[object ArrayBuffer]" === Wr.call(t) }, isBuffer: function (t) { return null !== t && !Hr(t) && null !== t.constructor && !Hr(t.constructor) && "function" == typeof t.constructor.isBuffer && t.constructor.isBuffer(t) }, isFormData: function (t) { return "undefined" != typeof FormData && t instanceof FormData }, isArrayBufferView: function (t) { return "undefined" != typeof ArrayBuffer && ArrayBuffer.isView ? ArrayBuffer.isView(t) : t && t.buffer && t.buffer instanceof ArrayBuffer }, isString: function (t) { return "string" == typeof t }, isNumber: function (t) { return "number" == typeof t }, isObject: Vr, isPlainObject: Gr, isUndefined: Hr, isDate: function (t) { return "[object Date]" === Wr.call(t) }, isFile: function (t) { return "[object File]" === Wr.call(t) }, isBlob: function (t) { return "[object Blob]" === Wr.call(t) }, isFunction: Xr, isStream: function (t) { return Vr(t) && Xr(t.pipe) }, isURLSearchParams: function (t) { return "undefined" != typeof URLSearchParams && t instanceof URLSearchParams }, isStandardBrowserEnv: function () { return ("undefined" == typeof navigator || "ReactNative" !== navigator.product && "NativeScript" !== navigator.product && "NS" !== navigator.product) && ("undefined" != typeof window && "undefined" != typeof document) }, forEach: Jr, merge: function t() { var e = {}; function n(n, r) { Gr(e[r]) && Gr(n) ? e[r] = t(e[r], n) : Gr(n) ? e[r] = t({}, n) : zr(n) ? e[r] = n.slice() : e[r] = n } for (var r = 0, o = arguments.length; r < o; r++)Jr(arguments[r], n); return e }, extend: function (t, e, n) { return Jr(e, (function (e, r) { t[r] = n && "function" == typeof e ? _r(e, n) : e })), t }, trim: function (t) { return t.replace(/^\s*/, "").replace(/\s*$/, "") }, stripBOM: function (t) { return 65279 === t.charCodeAt(0) && (t = t.slice(1)), t } }; function $r(t) { return encodeURIComponent(t).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+").replace(/%5B/gi, "[").replace(/%5D/gi, "]") } var Yr = function (t, e, n) { if (!e) return t; var r; if (n) r = n(e); else if (Kr.isURLSearchParams(e)) r = e.toString(); else { var o = []; Kr.forEach(e, (function (t, e) { null != t && (Kr.isArray(t) ? e += "[]" : t = [t], Kr.forEach(t, (function (t) { Kr.isDate(t) ? t = t.toISOString() : Kr.isObject(t) && (t = JSON.stringify(t)), o.push($r(e) + "=" + $r(t)) }))) })), r = o.join("&") } if (r) { var i = t.indexOf("#"); -1 !== i && (t = t.slice(0, i)), t += (-1 === t.indexOf("?") ? "?" : "&") + r } return t }; function Qr() { this.handlers = [] } Qr.prototype.use = function (t, e) { return this.handlers.push({ fulfilled: t, rejected: e }), this.handlers.length - 1 }, Qr.prototype.eject = function (t) { this.handlers[t] && (this.handlers[t] = null) }, Qr.prototype.forEach = function (t) { Kr.forEach(this.handlers, (function (e) { null !== e && t(e) })) }; var Zr = Qr, to = function (t, e, n) { return Kr.forEach(n, (function (n) { t = n(t, e) })), t }, eo = function (t) { return !(!t || !t.__CANCEL__) }, no = function (t, e) { Kr.forEach(t, (function (n, r) { r !== e && r.toUpperCase() === e.toUpperCase() && (t[e] = n, delete t[r]) })) }, ro = function (t, e, n, r, o) { return function (t, e, n, r, o) { return t.config = e, n && (t.code = n), t.request = r, t.response = o, t.isAxiosError = !0, t.toJSON = function () { return { message: this.message, name: this.name, description: this.description, number: this.number, fileName: this.fileName, lineNumber: this.lineNumber, columnNumber: this.columnNumber, stack: this.stack, config: this.config, code: this.code } }, t }(new Error(t), e, n, r, o) }, oo = Kr.isStandardBrowserEnv() ? { write: function (t, e, n, r, o, i) { var a = []; a.push(t + "=" + encodeURIComponent(e)), Kr.isNumber(n) && a.push("expires=" + new Date(n).toGMTString()), Kr.isString(r) && a.push("path=" + r), Kr.isString(o) && a.push("domain=" + o), !0 === i && a.push("secure"), document.cookie = a.join("; ") }, read: function (t) { var e = document.cookie.match(new RegExp("(^|;\\s*)(" + t + ")=([^;]*)")); return e ? decodeURIComponent(e[3]) : null }, remove: function (t) { this.write(t, "", Date.now() - 864e5) } } : { write: function () { }, read: function () { return null }, remove: function () { } }, io = ["age", "authorization", "content-length", "content-type", "etag", "expires", "from", "host", "if-modified-since", "if-unmodified-since", "last-modified", "location", "max-forwards", "proxy-authorization", "referer", "retry-after", "user-agent"], ao = Kr.isStandardBrowserEnv() ? function () { var t, e = /(msie|trident)/i.test(navigator.userAgent), n = document.createElement("a"); function r(t) { var r = t; return e && (n.setAttribute("href", r), r = n.href), n.setAttribute("href", r), { href: n.href, protocol: n.protocol ? n.protocol.replace(/:$/, "") : "", host: n.host, search: n.search ? n.search.replace(/^\?/, "") : "", hash: n.hash ? n.hash.replace(/^#/, "") : "", hostname: n.hostname, port: n.port, pathname: "/" === n.pathname.charAt(0) ? n.pathname : "/" + n.pathname } } return t = r(window.location.href), function (e) { var n = Kr.isString(e) ? r(e) : e; return n.protocol === t.protocol && n.host === t.host } }() : function () { return !0 }, co = function (t) { return new Promise((function (e, n) { var r = t.data, o = t.headers; Kr.isFormData(r) && delete o["Content-Type"], (Kr.isBlob(r) || Kr.isFile(r)) && r.type && delete o["Content-Type"]; var i = new XMLHttpRequest; if (t.auth) { var a = t.auth.username || "", c = unescape(encodeURIComponent(t.auth.password)) || ""; o.Authorization = "Basic " + btoa(a + ":" + c) } var u, s, f = (u = t.baseURL, s = t.url, u && !/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(s) ? function (t, e) { return e ? t.replace(/\/+$/, "") + "/" + e.replace(/^\/+/, "") : t }(u, s) : s); if (i.open(t.method.toUpperCase(), Yr(f, t.params, t.paramsSerializer), !0), i.timeout = t.timeout, i.onreadystatechange = function () { if (i && 4 === i.readyState && (0 !== i.status || i.responseURL && 0 === i.responseURL.indexOf("file:"))) { var r = "getAllResponseHeaders" in i ? function (t) { var e, n, r, o = {}; return t ? (Kr.forEach(t.split("\n"), (function (t) { if (r = t.indexOf(":"), e = Kr.trim(t.substr(0, r)).toLowerCase(), n = Kr.trim(t.substr(r + 1)), e) { if (o[e] && io.indexOf(e) >= 0) return; o[e] = "set-cookie" === e ? (o[e] ? o[e] : []).concat([n]) : o[e] ? o[e] + ", " + n : n } })), o) : o }(i.getAllResponseHeaders()) : null, o = { data: t.responseType && "text" !== t.responseType ? i.response : i.responseText, status: i.status, statusText: i.statusText, headers: r, config: t, request: i }; !function (t, e, n) { var r = n.config.validateStatus; n.status && r && !r(n.status) ? e(ro("Request failed with status code " + n.status, n.config, null, n.request, n)) : t(n) }(e, n, o), i = null } }, i.onabort = function () { i && (n(ro("Request aborted", t, "ECONNABORTED", i)), i = null) }, i.onerror = function () { n(ro("Network Error", t, null, i)), i = null }, i.ontimeout = function () { var e = "timeout of " + t.timeout + "ms exceeded"; t.timeoutErrorMessage && (e = t.timeoutErrorMessage), n(ro(e, t, "ECONNABORTED", i)), i = null }, Kr.isStandardBrowserEnv()) { var l = (t.withCredentials || ao(f)) && t.xsrfCookieName ? oo.read(t.xsrfCookieName) : void 0; l && (o[t.xsrfHeaderName] = l) } if ("setRequestHeader" in i && Kr.forEach(o, (function (t, e) { void 0 === r && "content-type" === e.toLowerCase() ? delete o[e] : i.setRequestHeader(e, t) })), Kr.isUndefined(t.withCredentials) || (i.withCredentials = !!t.withCredentials), t.responseType) try { i.responseType = t.responseType } catch (e) { if ("json" !== t.responseType) throw e } "function" == typeof t.onDownloadProgress && i.addEventListener("progress", t.onDownloadProgress), "function" == typeof t.onUploadProgress && i.upload && i.upload.addEventListener("progress", t.onUploadProgress), t.cancelToken && t.cancelToken.promise.then((function (t) { i && (i.abort(), n(t), i = null) })), r || (r = null), i.send(r) })) }, uo = { "Content-Type": "application/x-www-form-urlencoded" }; function so(t, e) { !Kr.isUndefined(t) && Kr.isUndefined(t["Content-Type"]) && (t["Content-Type"] = e) } var fo, lo = { adapter: (("undefined" != typeof XMLHttpRequest || "undefined" != typeof process && "[object process]" === Object.prototype.toString.call(process)) && (fo = co), fo), transformRequest: [function (t, e) { return no(e, "Accept"), no(e, "Content-Type"), Kr.isFormData(t) || Kr.isArrayBuffer(t) || Kr.isBuffer(t) || Kr.isStream(t) || Kr.isFile(t) || Kr.isBlob(t) ? t : Kr.isArrayBufferView(t) ? t.buffer : Kr.isURLSearchParams(t) ? (so(e, "application/x-www-form-urlencoded;charset=utf-8"), t.toString()) : Kr.isObject(t) ? (so(e, "application/json;charset=utf-8"), JSON.stringify(t)) : t }], transformResponse: [function (t) { if ("string" == typeof t) try { t = JSON.parse(t) } catch (t) { } return t }], timeout: 0, xsrfCookieName: "XSRF-TOKEN", xsrfHeaderName: "X-XSRF-TOKEN", maxContentLength: -1, maxBodyLength: -1, validateStatus: function (t) { return t >= 200 && t < 300 } }; lo.headers = { common: { Accept: "application/json, text/plain, */*" } }, Kr.forEach(["delete", "get", "head"], (function (t) { lo.headers[t] = {} })), Kr.forEach(["post", "put", "patch"], (function (t) { lo.headers[t] = Kr.merge(uo) })); var po = lo; function ho(t) { t.cancelToken && t.cancelToken.throwIfRequested() } var vo = function (t) { return ho(t), t.headers = t.headers || {}, t.data = to(t.data, t.headers, t.transformRequest), t.headers = Kr.merge(t.headers.common || {}, t.headers[t.method] || {}, t.headers), Kr.forEach(["delete", "get", "head", "post", "put", "patch", "common"], (function (e) { delete t.headers[e] })), (t.adapter || po.adapter)(t).then((function (e) { return ho(t), e.data = to(e.data, e.headers, t.transformResponse), e }), (function (e) { return eo(e) || (ho(t), e && e.response && (e.response.data = to(e.response.data, e.response.headers, t.transformResponse))), Promise.reject(e) })) }, go = function (t, e) { e = e || {}; var n = {}, r = ["url", "method", "data"], o = ["headers", "auth", "proxy", "params"], i = ["baseURL", "transformRequest", "transformResponse", "paramsSerializer", "timeout", "timeoutMessage", "withCredentials", "adapter", "responseType", "xsrfCookieName", "xsrfHeaderName", "onUploadProgress", "onDownloadProgress", "decompress", "maxContentLength", "maxBodyLength", "maxRedirects", "transport", "httpAgent", "httpsAgent", "cancelToken", "socketPath", "responseEncoding"], a = ["validateStatus"]; function c(t, e) { return Kr.isPlainObject(t) && Kr.isPlainObject(e) ? Kr.merge(t, e) : Kr.isPlainObject(e) ? Kr.merge({}, e) : Kr.isArray(e) ? e.slice() : e } function u(r) { Kr.isUndefined(e[r]) ? Kr.isUndefined(t[r]) || (n[r] = c(void 0, t[r])) : n[r] = c(t[r], e[r]) } Kr.forEach(r, (function (t) { Kr.isUndefined(e[t]) || (n[t] = c(void 0, e[t])) })), Kr.forEach(o, u), Kr.forEach(i, (function (r) { Kr.isUndefined(e[r]) ? Kr.isUndefined(t[r]) || (n[r] = c(void 0, t[r])) : n[r] = c(void 0, e[r]) })), Kr.forEach(a, (function (r) { r in e ? n[r] = c(t[r], e[r]) : r in t && (n[r] = c(void 0, t[r])) })); var s = r.concat(o).concat(i).concat(a), f = Object.keys(t).concat(Object.keys(e)).filter((function (t) { return -1 === s.indexOf(t) })); return Kr.forEach(f, u), n }; function mo(t) { this.defaults = t, this.interceptors = { request: new Zr, response: new Zr } } mo.prototype.request = function (t) { "string" == typeof t ? (t = arguments[1] || {}).url = arguments[0] : t = t || {}, (t = go(this.defaults, t)).method ? t.method = t.method.toLowerCase() : this.defaults.method ? t.method = this.defaults.method.toLowerCase() : t.method = "get"; var e = [vo, void 0], n = Promise.resolve(t); for (this.interceptors.request.forEach((function (t) { e.unshift(t.fulfilled, t.rejected) })), this.interceptors.response.forEach((function (t) { e.push(t.fulfilled, t.rejected) })); e.length;)n = n.then(e.shift(), e.shift()); return n }, mo.prototype.getUri = function (t) { return t = go(this.defaults, t), Yr(t.url, t.params, t.paramsSerializer).replace(/^\?/, "") }, Kr.forEach(["delete", "get", "head", "options"], (function (t) { mo.prototype[t] = function (e, n) { return this.request(go(n || {}, { method: t, url: e })) } })), Kr.forEach(["post", "put", "patch"], (function (t) { mo.prototype[t] = function (e, n, r) { return this.request(go(r || {}, { method: t, url: e, data: n })) } })); var yo = mo; function bo(t) { this.message = t } bo.prototype.toString = function () { return "Cancel" + (this.message ? ": " + this.message : "") }, bo.prototype.__CANCEL__ = !0; var wo = bo; function So(t) { if ("function" != typeof t) throw new TypeError("executor must be a function."); var e; this.promise = new Promise((function (t) { e = t })); var n = this; t((function (t) { n.reason || (n.reason = new wo(t), e(n.reason)) })) } So.prototype.throwIfRequested = function () { if (this.reason) throw this.reason }, So.source = function () { var t; return { token: new So((function (e) { t = e })), cancel: t } }; var jo = So; function Eo(t) { var e = new yo(t), n = _r(yo.prototype.request, e); return Kr.extend(n, yo.prototype, e), Kr.extend(n, e), n } var Oo = Eo(po); Oo.Axios = yo, Oo.create = function (t) { return Eo(go(Oo.defaults, t)) }, Oo.Cancel = wo, Oo.CancelToken = jo, Oo.isCancel = eo, Oo.all = function (t) { return Promise.all(t) }, Oo.spread = function (t) { return function (e) { return t.apply(null, e) } }; var To = Oo, xo = Oo; To.default = xo; var Co = To, Ao = ["v2", "v3", "canary"], Po = "@tryghost/content-api"; return function t(e) { var n = e.url, r = e.host, o = e.ghostPath, i = void 0 === o ? "ghost" : o, a = e.version, c = e.key; if (r && (console.warn("".concat(Po, ": The 'host' parameter is deprecated, please use 'url' instead")), n || (n = r)), this instanceof t) return t({ url: n, version: a, key: c }); if (!a) throw new Error("".concat(Po, " Config Missing: 'version' is required. E.g. ").concat(Ao.join(","))); if (!Ao.includes(a)) throw new Error("".concat(Po, " Config Invalid: 'version' ").concat(a, " is not supported")); if (!n) throw new Error("".concat(Po, " Config Missing: 'url' is required. E.g. 'https://site.com'")); if (!/https?:\/\//.test(n)) throw new Error("".concat(Po, " Config Invalid: 'url' ").concat(n, " requires a protocol. E.g. 'https://site.com'")); if (n.endsWith("/")) throw new Error("".concat(Po, " Config Invalid: 'url' ").concat(n, " must not have a trailing slash. E.g. 'https://site.com'")); if (i.endsWith("/") || i.startsWith("/")) throw new Error("".concat(Po, " Config Invalid: 'ghostPath' ").concat(i, " must not have a leading or trailing slash. E.g. 'ghost'")); if (c && !/[0-9a-f]{26}/.test(c)) throw new Error("".concat(Po, " Config Invalid: 'key' ").concat(c, " must have 26 hex characters")); var u = ["posts", "authors", "tags", "pages", "settings"].reduce((function (t, e) { return Object.assign(t, function (t, e, n) { return e in t ? Object.defineProperty(t, e, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : t[e] = n, t }({}, e, { read: function (t) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, r = arguments.length > 2 ? arguments[2] : void 0; if (!t || !t.id && !t.slug) return Promise.reject(new Error("".concat(Po, " read requires an id or slug."))); var o = Object.assign({}, t, n); return s(e, o, t.id || "slug/".concat(t.slug), r) }, browse: function () { var t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = arguments.length > 1 ? arguments[1] : void 0; return s(e, t, null, n) } })) }), {}); return delete u.settings.read, u; function s(t, e, r) { var o = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null; if (!o && !c) return Promise.reject(new Error("".concat(Po, " Config Missing: 'key' is required."))); delete e.id; var u = o ? { Authorization: "GhostMembers ".concat(o) } : void 0; return Co.get("".concat(n, "/").concat(i, "/api/").concat(a, "/content/").concat(t, "/").concat(r ? r + "/" : ""), { params: Object.assign({ key: c }, e), paramsSerializer: function (t) { return Object.keys(t).reduce((function (e, n) { var r = encodeURIComponent([].concat(t[n]).join(",")); return e.concat("".concat(n, "=").concat(r)) }), []).join("&") }, headers: u }).then((function (e) { return Array.isArray(e.data[t]) ? 1 !== e.data[t].length || e.data.meta ? Object.assign(e.data[t], { meta: e.data.meta }) : e.data[t][0] : e.data[t] })).catch((function (t) { if (t.response && t.response.data && t.response.data.errors) { var e = t.response.data.errors[0], n = new Error(e.message), r = Object.keys(e); throw n.name = e.type, r.forEach((function (t) { n[t] = e[t] })), n.response = t.response, n.request = t.request, n.config = t.config, n } throw t })) } } }));



var e, t; e = this, t = function () { "use strict"; function e(t) { return (e = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (e) { return typeof e } : function (e) { return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e })(t) } function t(e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") } function n(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } function r(e, t, r) { return t && n(e.prototype, t), r && n(e, r), e } function i(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function o(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var r = Object.getOwnPropertySymbols(e); t && (r = r.filter((function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable }))), n.push.apply(n, r) } return n } function c(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? o(Object(n), !0).forEach((function (t) { i(e, t, n[t]) })) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : o(Object(n)).forEach((function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) })) } return e } function a(e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function"); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: !0, configurable: !0 } }), t && u(e, t) } function s(e) { return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) { return e.__proto__ || Object.getPrototypeOf(e) })(e) } function u(e, t) { return (u = Object.setPrototypeOf || function (e, t) { return e.__proto__ = t, e })(e, t) } function h(e, t) { return !t || "object" != typeof t && "function" != typeof t ? function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(e) : t } function f(e) { var t = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Date.prototype.toString.call(Reflect.construct(Date, [], (function () { }))), !0 } catch (e) { return !1 } }(); return function () { var n, r = s(e); if (t) { var i = s(this).constructor; n = Reflect.construct(r, arguments, i) } else n = r.apply(this, arguments); return h(this, n) } } function l(e) { return function (e) { if (Array.isArray(e)) return d(e) }(e) || function (e) { if ("undefined" != typeof Symbol && Symbol.iterator in Object(e)) return Array.from(e) }(e) || function (e, t) { if (e) { if ("string" == typeof e) return d(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); return "Object" === n && e.constructor && (n = e.constructor.name), "Map" === n || "Set" === n ? Array.from(e) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? d(e, t) : void 0 } }(e) || function () { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") }() } function d(e, t) { (null == t || t > e.length) && (t = e.length); for (var n = 0, r = new Array(t); n < t; n++)r[n] = e[n]; return r } function v(e) { return Array.isArray ? Array.isArray(e) : "[object Array]" === x(e) } function g(e) { return "string" == typeof e } function y(e) { return "number" == typeof e } function p(e) { return !0 === e || !1 === e || function (e) { return m(e) && null !== e }(e) && "[object Boolean]" == x(e) } function m(t) { return "object" === e(t) } function k(e) { return null != e } function M(e) { return !e.trim().length } function x(e) { return null == e ? void 0 === e ? "[object Undefined]" : "[object Null]" : Object.prototype.toString.call(e) } var b = function (e) { return "Invalid value for key ".concat(e) }, S = function (e) { return "Pattern length exceeds max of ".concat(e, ".") }, _ = Object.prototype.hasOwnProperty, w = function () { function e(n) { var r = this; t(this, e), this._keys = [], this._keyMap = {}; var i = 0; n.forEach((function (e) { var t = L(e); i += t.weight, r._keys.push(t), r._keyMap[t.id] = t, i += t.weight })), this._keys.forEach((function (e) { e.weight /= i })) } return r(e, [{ key: "get", value: function (e) { return this._keyMap[e] } }, { key: "keys", value: function () { return this._keys } }, { key: "toJSON", value: function () { return JSON.stringify(this._keys) } }]), e }(); function L(e) { var t = null, n = null, r = null, i = 1; if (g(e) || v(e)) r = e, t = O(e), n = j(e); else { if (!_.call(e, "name")) throw new Error(function (e) { return "Missing ".concat(e, " property in key") }("name")); var o = e.name; if (r = o, _.call(e, "weight") && (i = e.weight) <= 0) throw new Error(function (e) { return "Property 'weight' in key '".concat(e, "' must be a positive integer") }(o)); t = O(o), n = j(o) } return { path: t, id: n, weight: i, src: r } } function O(e) { return v(e) ? e : e.split(".") } function j(e) { return v(e) ? e.join(".") : e } var A = c({}, { isCaseSensitive: !1, includeScore: !1, keys: [], shouldSort: !0, sortFn: function (e, t) { return e.score === t.score ? e.idx < t.idx ? -1 : 1 : e.score < t.score ? -1 : 1 } }, {}, { includeMatches: !1, findAllMatches: !1, minMatchCharLength: 1 }, {}, { location: 0, threshold: .6, distance: 100 }, {}, { useExtendedSearch: !1, getFn: function (e, t) { var n = [], r = !1; return function e(t, i, o) { if (i[o]) { var c = t[i[o]]; if (!k(c)) return; if (o === i.length - 1 && (g(c) || y(c) || p(c))) n.push(function (e) { return null == e ? "" : function (e) { if ("string" == typeof e) return e; var t = e + ""; return "0" == t && 1 / e == -1 / 0 ? "-0" : t }(e) }(c)); else if (v(c)) { r = !0; for (var a = 0, s = c.length; a < s; a += 1)e(c[a], i, o + 1) } else i.length && e(c, i, o + 1) } else n.push(t) }(e, g(t) ? t.split(".") : t, 0), r ? n : n[0] }, ignoreLocation: !1, ignoreFieldNorm: !1 }), I = /[^ ]+/g; function C() { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 3, t = new Map; return { get: function (n) { var r = n.match(I).length; if (t.has(r)) return t.get(r); var i = parseFloat((1 / Math.sqrt(r)).toFixed(e)); return t.set(r, i), i }, clear: function () { t.clear() } } } var E = function () { function e() { var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, r = n.getFn, i = void 0 === r ? A.getFn : r; t(this, e), this.norm = C(3), this.getFn = i, this.isCreated = !1, this.setIndexRecords() } return r(e, [{ key: "setSources", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; this.docs = e } }, { key: "setIndexRecords", value: function () { var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; this.records = e } }, { key: "setKeys", value: function () { var e = this, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : []; this.keys = t, this._keysMap = {}, t.forEach((function (t, n) { e._keysMap[t.id] = n })) } }, { key: "create", value: function () { var e = this; !this.isCreated && this.docs.length && (this.isCreated = !0, g(this.docs[0]) ? this.docs.forEach((function (t, n) { e._addString(t, n) })) : this.docs.forEach((function (t, n) { e._addObject(t, n) })), this.norm.clear()) } }, { key: "add", value: function (e) { var t = this.size(); g(e) ? this._addString(e, t) : this._addObject(e, t) } }, { key: "removeAt", value: function (e) { this.records.splice(e, 1); for (var t = e, n = this.size(); t < n; t += 1)this.records[t].i -= 1 } }, { key: "getValueForItemAtKeyId", value: function (e, t) { return e[this._keysMap[t]] } }, { key: "size", value: function () { return this.records.length } }, { key: "_addString", value: function (e, t) { if (k(e) && !M(e)) { var n = { v: e, i: t, n: this.norm.get(e) }; this.records.push(n) } } }, { key: "_addObject", value: function (e, t) { var n = this, r = { i: t, $: {} }; this.keys.forEach((function (t, i) { var o = n.getFn(e, t.path); if (k(o)) if (v(o)) !function () { for (var e = [], t = [{ nestedArrIndex: -1, value: o }]; t.length;) { var c = t.pop(), a = c.nestedArrIndex, s = c.value; if (k(s)) if (g(s) && !M(s)) { var u = { v: s, i: a, n: n.norm.get(s) }; e.push(u) } else v(s) && s.forEach((function (e, n) { t.push({ nestedArrIndex: n, value: e }) })) } r.$[i] = e }(); else if (!M(o)) { var c = { v: o, n: n.norm.get(o) }; r.$[i] = c } })), this.records.push(r) } }, { key: "toJSON", value: function () { return { keys: this.keys, records: this.records } } }]), e }(); function $(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, r = n.getFn, i = void 0 === r ? A.getFn : r, o = new E({ getFn: i }); return o.setKeys(e.map(L)), o.setSources(t), o.create(), o } function R(e, t) { var n = e.matches; t.matches = [], k(n) && n.forEach((function (e) { if (k(e.indices) && e.indices.length) { var n = { indices: e.indices, value: e.value }; e.key && (n.key = e.key.src), e.idx > -1 && (n.refIndex = e.idx), t.matches.push(n) } })) } function F(e, t) { t.score = e.score } function P(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = t.errors, r = void 0 === n ? 0 : n, i = t.currentLocation, o = void 0 === i ? 0 : i, c = t.expectedLocation, a = void 0 === c ? 0 : c, s = t.distance, u = void 0 === s ? A.distance : s, h = t.ignoreLocation, f = void 0 === h ? A.ignoreLocation : h, l = r / e.length; if (f) return l; var d = Math.abs(a - o); return u ? l + d / u : d ? 1 : l } function N() { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [], t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : A.minMatchCharLength, n = [], r = -1, i = -1, o = 0, c = e.length; o < c; o += 1) { var a = e[o]; a && -1 === r ? r = o : a || -1 === r || ((i = o - 1) - r + 1 >= t && n.push([r, i]), r = -1) } return e[o - 1] && o - r >= t && n.push([r, o - 1]), n } function D(e) { for (var t = {}, n = 0, r = e.length; n < r; n += 1) { var i = e.charAt(n); t[i] = (t[i] || 0) | 1 << r - n - 1 } return t } var z = function () { function e(n) { var r = this, i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, o = i.location, c = void 0 === o ? A.location : o, a = i.threshold, s = void 0 === a ? A.threshold : a, u = i.distance, h = void 0 === u ? A.distance : u, f = i.includeMatches, l = void 0 === f ? A.includeMatches : f, d = i.findAllMatches, v = void 0 === d ? A.findAllMatches : d, g = i.minMatchCharLength, y = void 0 === g ? A.minMatchCharLength : g, p = i.isCaseSensitive, m = void 0 === p ? A.isCaseSensitive : p, k = i.ignoreLocation, M = void 0 === k ? A.ignoreLocation : k; if (t(this, e), this.options = { location: c, threshold: s, distance: h, includeMatches: l, findAllMatches: v, minMatchCharLength: y, isCaseSensitive: m, ignoreLocation: M }, this.pattern = m ? n : n.toLowerCase(), this.chunks = [], this.pattern.length) { var x = function (e, t) { r.chunks.push({ pattern: e, alphabet: D(e), startIndex: t }) }, b = this.pattern.length; if (b > 32) { for (var S = 0, _ = b % 32, w = b - _; S < w;)x(this.pattern.substr(S, 32), S), S += 32; if (_) { var L = b - 32; x(this.pattern.substr(L), L) } } else x(this.pattern, 0) } } return r(e, [{ key: "searchIn", value: function (e) { var t = this.options, n = t.isCaseSensitive, r = t.includeMatches; if (n || (e = e.toLowerCase()), this.pattern === e) { var i = { isMatch: !0, score: 0 }; return r && (i.indices = [[0, e.length - 1]]), i } var o = this.options, c = o.location, a = o.distance, s = o.threshold, u = o.findAllMatches, h = o.minMatchCharLength, f = o.ignoreLocation, d = [], v = 0, g = !1; this.chunks.forEach((function (t) { var n = t.pattern, i = t.alphabet, o = t.startIndex, y = function (e, t, n) { var r = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {}, i = r.location, o = void 0 === i ? A.location : i, c = r.distance, a = void 0 === c ? A.distance : c, s = r.threshold, u = void 0 === s ? A.threshold : s, h = r.findAllMatches, f = void 0 === h ? A.findAllMatches : h, l = r.minMatchCharLength, d = void 0 === l ? A.minMatchCharLength : l, v = r.includeMatches, g = void 0 === v ? A.includeMatches : v, y = r.ignoreLocation, p = void 0 === y ? A.ignoreLocation : y; if (t.length > 32) throw new Error(S(32)); for (var m, k = t.length, M = e.length, x = Math.max(0, Math.min(o, M)), b = u, _ = x, w = d > 1 || g, L = w ? Array(M) : []; (m = e.indexOf(t, _)) > -1;) { var O = P(t, { currentLocation: m, expectedLocation: x, distance: a, ignoreLocation: p }); if (b = Math.min(O, b), _ = m + k, w) for (var j = 0; j < k;)L[m + j] = 1, j += 1 } _ = -1; for (var I = [], C = 1, E = k + M, $ = 1 << k - 1, R = 0; R < k; R += 1) { for (var F = 0, D = E; F < D;) { var z = P(t, { errors: R, currentLocation: x + D, expectedLocation: x, distance: a, ignoreLocation: p }); z <= b ? F = D : E = D, D = Math.floor((E - F) / 2 + F) } E = D; var K = Math.max(1, x - D + 1), q = f ? M : Math.min(x + D, M) + k, W = Array(q + 2); W[q + 1] = (1 << R) - 1; for (var J = q; J >= K; J -= 1) { var T = J - 1, U = n[e.charAt(T)]; if (w && (L[T] = +!!U), W[J] = (W[J + 1] << 1 | 1) & U, R && (W[J] |= (I[J + 1] | I[J]) << 1 | 1 | I[J + 1]), W[J] & $ && (C = P(t, { errors: R, currentLocation: T, expectedLocation: x, distance: a, ignoreLocation: p })) <= b) { if (b = C, (_ = T) <= x) break; K = Math.max(1, 2 * x - _) } } var V = P(t, { errors: R + 1, currentLocation: x, expectedLocation: x, distance: a, ignoreLocation: p }); if (V > b) break; I = W } var B = { isMatch: _ >= 0, score: Math.max(.001, C) }; if (w) { var G = N(L, d); G.length ? g && (B.indices = G) : B.isMatch = !1 } return B }(e, n, i, { location: c + o, distance: a, threshold: s, findAllMatches: u, minMatchCharLength: h, includeMatches: r, ignoreLocation: f }), p = y.isMatch, m = y.score, k = y.indices; p && (g = !0), v += m, p && k && (d = [].concat(l(d), l(k))) })); var y = { isMatch: g, score: g ? v / this.chunks.length : 1 }; return g && r && (y.indices = d), y } }]), e }(), K = function () { function e(n) { t(this, e), this.pattern = n } return r(e, [{ key: "search", value: function () { } }], [{ key: "isMultiMatch", value: function (e) { return q(e, this.multiRegex) } }, { key: "isSingleMatch", value: function (e) { return q(e, this.singleRegex) } }]), e }(); function q(e, t) { var n = e.match(t); return n ? n[1] : null } var W = function (e) { a(i, e); var n = f(i); function i(e) { return t(this, i), n.call(this, e) } return r(i, [{ key: "search", value: function (e) { var t = e === this.pattern; return { isMatch: t, score: t ? 0 : 1, indices: [0, this.pattern.length - 1] } } }], [{ key: "type", get: function () { return "exact" } }, { key: "multiRegex", get: function () { return /^="(.*)"$/ } }, { key: "singleRegex", get: function () { return /^=(.*)$/ } }]), i }(K), J = function (e) { a(i, e); var n = f(i); function i(e) { return t(this, i), n.call(this, e) } return r(i, [{ key: "search", value: function (e) { var t = -1 === e.indexOf(this.pattern); return { isMatch: t, score: t ? 0 : 1, indices: [0, e.length - 1] } } }], [{ key: "type", get: function () { return "inverse-exact" } }, { key: "multiRegex", get: function () { return /^!"(.*)"$/ } }, { key: "singleRegex", get: function () { return /^!(.*)$/ } }]), i }(K), T = function (e) { a(i, e); var n = f(i); function i(e) { return t(this, i), n.call(this, e) } return r(i, [{ key: "search", value: function (e) { var t = e.startsWith(this.pattern); return { isMatch: t, score: t ? 0 : 1, indices: [0, this.pattern.length - 1] } } }], [{ key: "type", get: function () { return "prefix-exact" } }, { key: "multiRegex", get: function () { return /^\^"(.*)"$/ } }, { key: "singleRegex", get: function () { return /^\^(.*)$/ } }]), i }(K), U = function (e) { a(i, e); var n = f(i); function i(e) { return t(this, i), n.call(this, e) } return r(i, [{ key: "search", value: function (e) { var t = !e.startsWith(this.pattern); return { isMatch: t, score: t ? 0 : 1, indices: [0, e.length - 1] } } }], [{ key: "type", get: function () { return "inverse-prefix-exact" } }, { key: "multiRegex", get: function () { return /^!\^"(.*)"$/ } }, { key: "singleRegex", get: function () { return /^!\^(.*)$/ } }]), i }(K), V = function (e) { a(i, e); var n = f(i); function i(e) { return t(this, i), n.call(this, e) } return r(i, [{ key: "search", value: function (e) { var t = e.endsWith(this.pattern); return { isMatch: t, score: t ? 0 : 1, indices: [e.length - this.pattern.length, e.length - 1] } } }], [{ key: "type", get: function () { return "suffix-exact" } }, { key: "multiRegex", get: function () { return /^"(.*)"\$$/ } }, { key: "singleRegex", get: function () { return /^(.*)\$$/ } }]), i }(K), B = function (e) { a(i, e); var n = f(i); function i(e) { return t(this, i), n.call(this, e) } return r(i, [{ key: "search", value: function (e) { var t = !e.endsWith(this.pattern); return { isMatch: t, score: t ? 0 : 1, indices: [0, e.length - 1] } } }], [{ key: "type", get: function () { return "inverse-suffix-exact" } }, { key: "multiRegex", get: function () { return /^!"(.*)"\$$/ } }, { key: "singleRegex", get: function () { return /^!(.*)\$$/ } }]), i }(K), G = function (e) { a(i, e); var n = f(i); function i(e) { var r, o = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, c = o.location, a = void 0 === c ? A.location : c, s = o.threshold, u = void 0 === s ? A.threshold : s, h = o.distance, f = void 0 === h ? A.distance : h, l = o.includeMatches, d = void 0 === l ? A.includeMatches : l, v = o.findAllMatches, g = void 0 === v ? A.findAllMatches : v, y = o.minMatchCharLength, p = void 0 === y ? A.minMatchCharLength : y, m = o.isCaseSensitive, k = void 0 === m ? A.isCaseSensitive : m; return t(this, i), (r = n.call(this, e))._bitapSearch = new z(e, { location: a, threshold: u, distance: f, includeMatches: d, findAllMatches: g, minMatchCharLength: p, isCaseSensitive: k }), r } return r(i, [{ key: "search", value: function (e) { return this._bitapSearch.searchIn(e) } }], [{ key: "type", get: function () { return "fuzzy" } }, { key: "multiRegex", get: function () { return /^"(.*)"$/ } }, { key: "singleRegex", get: function () { return /^(.*)$/ } }]), i }(K), H = function (e) { a(i, e); var n = f(i); function i(e) { return t(this, i), n.call(this, e) } return r(i, [{ key: "search", value: function (e) { for (var t, n = 0, r = [], i = this.pattern.length; (t = e.indexOf(this.pattern, n)) > -1;)n = t + i, r.push([t, n - 1]); var o = !!r.length; return { isMatch: o, score: o ? 1 : 0, indices: r } } }], [{ key: "type", get: function () { return "include" } }, { key: "multiRegex", get: function () { return /^'"(.*)"$/ } }, { key: "singleRegex", get: function () { return /^'(.*)$/ } }]), i }(K), Q = [W, H, T, U, B, V, J, G], X = Q.length, Y = / +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/; function Z(e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; return e.split("|").map((function (e) { for (var n = e.trim().split(Y).filter((function (e) { return e && !!e.trim() })), r = [], i = 0, o = n.length; i < o; i += 1) { for (var c = n[i], a = !1, s = -1; !a && ++s < X;) { var u = Q[s], h = u.isMultiMatch(c); h && (r.push(new u(h, t)), a = !0) } if (!a) for (s = -1; ++s < X;) { var f = Q[s], l = f.isSingleMatch(c); if (l) { r.push(new f(l, t)); break } } } return r })) } var ee = new Set([G.type, H.type]), te = function () { function e(n) { var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = r.isCaseSensitive, o = void 0 === i ? A.isCaseSensitive : i, c = r.includeMatches, a = void 0 === c ? A.includeMatches : c, s = r.minMatchCharLength, u = void 0 === s ? A.minMatchCharLength : s, h = r.findAllMatches, f = void 0 === h ? A.findAllMatches : h, l = r.location, d = void 0 === l ? A.location : l, v = r.threshold, g = void 0 === v ? A.threshold : v, y = r.distance, p = void 0 === y ? A.distance : y; t(this, e), this.query = null, this.options = { isCaseSensitive: o, includeMatches: a, minMatchCharLength: u, findAllMatches: f, location: d, threshold: g, distance: p }, this.pattern = o ? n : n.toLowerCase(), this.query = Z(this.pattern, this.options) } return r(e, [{ key: "searchIn", value: function (e) { var t = this.query; if (!t) return { isMatch: !1, score: 1 }; var n = this.options, r = n.includeMatches; e = n.isCaseSensitive ? e : e.toLowerCase(); for (var i = 0, o = [], c = 0, a = 0, s = t.length; a < s; a += 1) { var u = t[a]; o.length = 0, i = 0; for (var h = 0, f = u.length; h < f; h += 1) { var d = u[h], v = d.search(e), g = v.isMatch, y = v.indices, p = v.score; if (!g) { c = 0, i = 0, o.length = 0; break } if (i += 1, c += p, r) { var m = d.constructor.type; ee.has(m) ? o = [].concat(l(o), l(y)) : o.push(y) } } if (i) { var k = { isMatch: !0, score: c / i }; return r && (k.indices = o), k } } return { isMatch: !1, score: 1 } } }], [{ key: "condition", value: function (e, t) { return t.useExtendedSearch } }]), e }(), ne = []; function re(e, t) { for (var n = 0, r = ne.length; n < r; n += 1) { var i = ne[n]; if (i.condition(e, t)) return new i(e, t) } return new z(e, t) } var ie = "$and", oe = "$or", ce = "$path", ae = "$val", se = function (e) { return !(!e[ie] && !e[oe]) }, ue = function (e) { return !!e[ce] }, he = function (e) { return !v(e) && m(e) && !se(e) }, fe = function (e) { return i({}, ie, Object.keys(e).map((function (t) { return i({}, t, e[t]) }))) }, le = function () { function e(n) { var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, i = arguments.length > 2 ? arguments[2] : void 0; t(this, e), this.options = c({}, A, {}, r), this.options.useExtendedSearch, this._keyStore = new w(this.options.keys), this.setCollection(n, i) } return r(e, [{ key: "setCollection", value: function (e, t) { if (this._docs = e, t && !(t instanceof E)) throw new Error("Incorrect 'index' type"); this._myIndex = t || $(this.options.keys, this._docs, { getFn: this.options.getFn }) } }, { key: "add", value: function (e) { k(e) && (this._docs.push(e), this._myIndex.add(e)) } }, { key: "remove", value: function () { for (var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : function () { return !1 }, t = [], n = 0, r = this._docs.length; n < r; n += 1) { var i = this._docs[n]; e(i, n) && (this.removeAt(n), n -= 1, t.push(i)) } return t } }, { key: "removeAt", value: function (e) { this._docs.splice(e, 1), this._myIndex.removeAt(e) } }, { key: "getIndex", value: function () { return this._myIndex } }, { key: "search", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = t.limit, r = void 0 === n ? -1 : n, i = this.options, o = i.includeMatches, c = i.includeScore, a = i.shouldSort, s = i.sortFn, u = i.ignoreFieldNorm, h = g(e) ? g(this._docs[0]) ? this._searchStringList(e) : this._searchObjectList(e) : this._searchLogical(e); return de(h, { ignoreFieldNorm: u }), a && h.sort(s), y(r) && r > -1 && (h = h.slice(0, r)), ve(h, this._docs, { includeMatches: o, includeScore: c }) } }, { key: "_searchStringList", value: function (e) { var t = re(e, this.options), n = this._myIndex.records, r = []; return n.forEach((function (e) { var n = e.v, i = e.i, o = e.n; if (k(n)) { var c = t.searchIn(n), a = c.isMatch, s = c.score, u = c.indices; a && r.push({ item: n, idx: i, matches: [{ score: s, value: n, norm: o, indices: u }] }) } })), r } }, { key: "_searchLogical", value: function (e) { var t = this, n = function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, r = n.auto, i = void 0 === r || r, o = function e(n) { var r = Object.keys(n), o = ue(n); if (!o && r.length > 1 && !se(n)) return e(fe(n)); if (he(n)) { var c = o ? n[ce] : r[0], a = o ? n[ae] : n[c]; if (!g(a)) throw new Error(b(c)); var s = { keyId: j(c), pattern: a }; return i && (s.searcher = re(a, t)), s } var u = { children: [], operator: r[0] }; return r.forEach((function (t) { var r = n[t]; v(r) && r.forEach((function (t) { u.children.push(e(t)) })) })), u }; return se(e) || (e = fe(e)), o(e) }(e, this.options), r = this._myIndex.records, i = {}, o = []; return r.forEach((function (e) { var r = e.$, c = e.i; if (k(r)) { var a = function e(n, r, i) { if (!n.children) { var o = n.keyId, c = n.searcher, a = t._findMatches({ key: t._keyStore.get(o), value: t._myIndex.getValueForItemAtKeyId(r, o), searcher: c }); return a && a.length ? [{ idx: i, item: r, matches: a }] : [] } switch (n.operator) { case ie: for (var s = [], u = 0, h = n.children.length; u < h; u += 1) { var f = e(n.children[u], r, i); if (!f.length) return []; s.push.apply(s, l(f)) } return s; case oe: for (var d = [], v = 0, g = n.children.length; v < g; v += 1) { var y = e(n.children[v], r, i); if (y.length) { d.push.apply(d, l(y)); break } } return d } }(n, r, c); a.length && (i[c] || (i[c] = { idx: c, item: r, matches: [] }, o.push(i[c])), a.forEach((function (e) { var t, n = e.matches; (t = i[c].matches).push.apply(t, l(n)) }))) } })), o } }, { key: "_searchObjectList", value: function (e) { var t = this, n = re(e, this.options), r = this._myIndex, i = r.keys, o = r.records, c = []; return o.forEach((function (e) { var r = e.$, o = e.i; if (k(r)) { var a = []; i.forEach((function (e, i) { a.push.apply(a, l(t._findMatches({ key: e, value: r[i], searcher: n }))) })), a.length && c.push({ idx: o, item: r, matches: a }) } })), c } }, { key: "_findMatches", value: function (e) { var t = e.key, n = e.value, r = e.searcher; if (!k(n)) return []; var i = []; if (v(n)) n.forEach((function (e) { var n = e.v, o = e.i, c = e.n; if (k(n)) { var a = r.searchIn(n), s = a.isMatch, u = a.score, h = a.indices; s && i.push({ score: u, key: t, value: n, idx: o, norm: c, indices: h }) } })); else { var o = n.v, c = n.n, a = r.searchIn(o), s = a.isMatch, u = a.score, h = a.indices; s && i.push({ score: u, key: t, value: o, norm: c, indices: h }) } return i } }]), e }(); function de(e, t) { var n = t.ignoreFieldNorm, r = void 0 === n ? A.ignoreFieldNorm : n; e.forEach((function (e) { var t = 1; e.matches.forEach((function (e) { var n = e.key, i = e.norm, o = e.score, c = n ? n.weight : null; t *= Math.pow(0 === o && c ? Number.EPSILON : o, (c || 1) * (r ? 1 : i)) })), e.score = t })) } function ve(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, r = n.includeMatches, i = void 0 === r ? A.includeMatches : r, o = n.includeScore, c = void 0 === o ? A.includeScore : o, a = []; return i && a.push(R), c && a.push(F), e.map((function (e) { var n = e.idx, r = { item: t[n], refIndex: n }; return a.length && a.forEach((function (t) { t(e, r) })), r })) } return le.version = "6.4.1", le.createIndex = $, le.parseIndex = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = t.getFn, r = void 0 === n ? A.getFn : n, i = e.keys, o = e.records, c = new E({ getFn: r }); return c.setKeys(i), c.setIndexRecords(o), c }, le.config = A, function () { ne.push.apply(ne, arguments) }(te), le }, "object" == typeof exports && "undefined" != typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define(t) : (e = e || self).Fuse = t();
